function getLocationID(){return $("#location-id").text()}function showGraphMask(){$(".graph-mask").show()}function hideGraphMask(){$(".graph-mask").hide()}function renderChart(e){var b={scaleLabel:"<%= ' ' + value + '%' %>",scaleShowGridLines:false,pointDot:false,animation:true,showTooltips:false,barValueSpacing:1};var a=document.getElementById("myChart").getContext("2d");var c={labels:e.graph_date_times,datasets:[{label:"Foot Traffic",fillColor:"rgba(41, 128, 185,0.5)",data:e.graph_percents}]};var d=new Chart(a).Bar(c,b)}function updatePredictionGraph(d){showGraphMask();var b=getLocationID();var e=false;var c=$("#machine-learned");if(c[0]){e=c[0].checked}var a="/locations/"+b+"/prediction/"+d+"/?machine_learned="+e;$.ajax({url:a,method:"GET",success:function(f){var g=JSON.parse(f);renderChart(g);if(g.graph_date_times.length===0){$(".graph-missing-text").css("display","inline-block");$("#myChart").css("opacity","0")}else{$(".graph-missing-text").hide();$("#myChart").css("opacity","1");renderChart(g)}$("#trend-day-text").text(g.day);hideGraphMask()},error:function(f,h,g){bootbox.alert("Could not get prediction for weekday "+d);hideGraphMask()}})}$(document).ready(function(){$(".prediction-btn").click(function(){var a=$(this).attr("id");updatePredictionGraph(a)})});